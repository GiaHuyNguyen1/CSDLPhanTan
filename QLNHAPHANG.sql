CREATE DATABASE QLNHAPDOTHETHAO
USE QLNHAPDOTHETHAO

CREATE TABLE CHINHANH
(
	MACN CHAR(10) NOT NULL PRIMARY KEY,
	TENCN NVARCHAR(100),
	DIACHI NVARCHAR(100),
	SDT CHAR(10)
)

CREATE TABLE NHANVIEN
(
	MANV CHAR(10) NOT NULL PRIMARY KEY,
	TENNV NVARCHAR(100),
	DIACHI NVARCHAR(100),
	SDT CHAR(10),
	MACN CHAR(10),
	CONSTRAINT FK_NV FOREIGN KEY (MACN) REFERENCES CHINHANH(MACN)
)
CREATE TABLE SANPHAM
(
	MASP CHAR(10) NOT NULL PRIMARY KEY,
	TENSP NVARCHAR(50),
	DVT CHAR(10),
	DONGIABAN FLOAT,
	GHICHU NVARCHAR(100)
)

CREATE TABLE KHO 
(
	MAKHO CHAR(10) NOT NULL PRIMARY KEY,
	TENKHO NVARCHAR(100),
	MACN CHAR(10),
	CONSTRAINT FK_KHO FOREIGN KEY (MACN) REFERENCES CHINHANH(MACN)
)
CREATE TABLE CTKHO
(
	MAKHO CHAR(10) NOT NULL,
	MASP CHAR(10) NOT NULL,
	SL INT,
	CONSTRAINT PK_CTKHO PRIMARY KEY(MAKHO,MASP),
	CONSTRAINT FK_CT_KHO FOREIGN KEY (MAKHO) REFERENCES KHO(MAKHO),
	CONSTRAINT FK_CT_SP FOREIGN KEY (MASP) REFERENCES SANPHAM(MASP)
)
CREATE TABLE NHAPKHO
(
	MANHAP CHAR(10) NOT NULL,
	MAKHO CHAR(10),
	TONGTIEN FLOAT,
	CONSTRAINT PK_NHAPKHO PRIMARY KEY (MANHAP),
	CONSTRAINT FK_NAP_KHO FOREIGN KEY (MAKHO) REFERENCES KHO(MAKHO)
)
CREATE TABLE CHITIETNHAP
(
	MANHAP CHAR(10) NOT NULL,
	MASP CHAR(10) NOT NULL,
	SL INT,
	THANHTIEN FLOAT,
	CONSTRAINT PK_CT PRIMARY KEY(MANHAP,MASP),
	CONSTRAINT FK_CT_NHAP FOREIGN KEY (MANHAP) REFERENCES NHAPKHO(MANHAP),
	CONSTRAINT FK_CTK_SP FOREIGN KEY (MASP) REFERENCES SANPHAM(MASP)

)

INSERT INTO CHINHANH
VALUES
('CN01','CHI NHANH HCM','423 LE TRONG TAN','0965848775'),
('CN02','CHI NHANH HN','423 LE DUC THO','0965848225')

INSERT INTO SANPHAM
VALUES
('SP01',N'GI頭 Pan Vigor X Nagoya LTD IC','DOI',2100000,''),
('SP02',N'GI頭 Pan Vigor X Nagoya LTD IC','DOI',2100000,''),
('SP03',N'GI頭 Pan Vigor V Tokyo LTD IC','DOi',4100000,''),
('SP04',N'GI頭 Pan Vigor VII Nagoya LTD IC','DOI',2100000,''),
('SP05',N'GI頭 Pan Vigor V Nagoya LTD IC','DOI',5000000,''),
('SP06',N'GI頭 Pan Vigor B Naka LTD IC','DOI',600000,'')

INSERT INTO KHO
VALUES
('KHO01','KHO TPHCM1','CN01'),
('KHO02','KHO TPHCM2','CN01'),
('KHO03','KHO HN1','CN02'),
('KHO04','KHO HN2','CN02')
INSERT INTO CTKHO
VALUES
('KHO01','SP01',1000),
('KHO01','SP02',100),
('KHO02','SP03',3000)


INSERT INTO NHANVIEN
VALUES
('NV01','HUY','423 LE TRONG TAN','0235662333','CN01'),
('NV02','HUY','42 LE DUC THO','0235661113','CN01'),
('NV03','DUYEN','3 LE TRONG TAN','0235662223','CN02'),
('NV04','THUAN','43 LE TRONG TAN','0234122333','CN02'),
('NV05','HUYEN','23 NGUYEN VAN LUONG','0235111333','CN01')

INSERT INTO NHAPKHO
VALUES
('NHAP01','KHO01',12000000),
('NHAP02','KHO02',10000000),
('NHAP03','KHO02',14000000),
('NHAP04','KHO03',11000000)

INSERT INTO CHITIETNHAP
VALUES
('NHAP01','SP01',12,500000),
('NHAP01','SP02',12,500000),
('NHAP01','SP03',12,500000),
('NHAP02','SP04',12,500000),
('NHAP03','SP02',12,500000),
('NHAP03','SP04',12,1000000),
('NHAP02','SP05',12,1000000)